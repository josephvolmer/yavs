# Buildable vulnerable Python application for testing image scanning
FROM python:3.9

# Hardcoded environment variables (security issue)
ENV API_SECRET="my-secret-key-12345" \
    DATABASE_URL="postgresql://admin:password@localhost/mydb"

# Create app directory
WORKDIR /app

# Copy requirements with vulnerable dependencies
COPY requirements.txt .

# Install vulnerable dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Copy application code
COPY app.py .

# Run as root (security issue - should use non-root user)
# Expose port
EXPOSE 5000

# No HEALTHCHECK defined (best practice missing)
# Run application
CMD ["python", "app.py"]
